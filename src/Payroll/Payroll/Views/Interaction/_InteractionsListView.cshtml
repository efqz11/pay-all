@model List<Notification>
@*@inject Payroll.Database.PayrollDbContext dbContext
@inject UserResolverService UserResolverService*@
@{ 
    int srcId = (int)ViewBag.SourceId;
    var i = 0;
}

@if (Model.Count() > 0)
{
    <input type="text" class="form-control form-control-sm mb-1 intrrAction-search" placeholder="Start typing names here" />
}
@*<ul class="list-group intrrAction">
    <li class="list-group-item intrrAction first" style="">
        <div style="display:flex; line-height: 1.2;">
            <a class=" text-primary" data-ajax="true" data-ajax-method="GET" data-ajax-failure="handleModalPostFailure" asp-action="AddOrUpdate" data-ajax-update=".modal__container" asp-controller="Interaction" asp-route-annId="@srcId" style="">
                <i class="fa  fa-user-plus"></i>
                <span>Sent to employee</span>
            </a>
        </div>
    </li>
    @foreach (var emp in Model.OrderByDescending(x => x.IsRecieved).ThenByDescending(x => x.SentDate))
    {
        <li class="list-group-item intrrAction" style="@((i>5 ? "display:none" : ""))">
            <div style="display:flex; line-height: 1.2;">

                <img src="@(Url.Content(emp.Employee?.PhotoLink?? DefaultPictures.default_user))" class="image rounded-circle" height="30" style="margin-right:10px" title="@emp.Employee.EmpID - @emp.Employee.NameDisplay" />

                <span>
                    @emp.Employee.NameDisplay <br />
                    @if (emp.IsRecieved)
                    {
                        <small class="text-success">Recieved @emp.RecievedDate.Value.GetTimeDifference() ago</small>
                    }
                    else
                    {
                        <small>Sent on @emp.SentDate.ToLocalFormat(true).ToLower()</small>
                    }
                </span>
                @if (@User.IsInRole(Roles.PayAll.admin))
                {
                    <a class="btn-link text-danger" data-ajax="true" data-ajax-method="DELETE" data-ajax-failure="handleModalPostFailure" data-ajax-success="$(this).parent().parent().fadeOut();sendNotification('success', 'Interaction was just removed');" asp-action="Remove" asp-controller="Interaction" asp-route-id="@emp.Id" style="position:absolute;right: 22px">
                        Remove
                    </a>
                }
            </div>
        </li>

        i++;

        if (i == Model.Count() && (Model.Count() - 5) > 1)
        {
            <li class="list-group-item intrrAction intrrAction-custom">
                <div style="display:flex; line-height: 1.2;text-align:center">
                    There are more @(Model.Count() - 5) records.
                </div>
            </li>
        }
    }

    @if (Model.Count() <= 0)
    {
        <li class="list-group-item intrrAction intrrAction-custom">
            <div style="display:flex; line-height: 1.2;text-align:center">
                There are no records to show here.
            </div>
        </li>
    }
</ul>*@
